!function(wpmUi){function _init(){null==_html&&(_doc=jQuery(document),_html=jQuery("html"),_body=jQuery("body"),_init_boxes(),_init_tabs(),_body.hasClass("no-auto-init")||(wpmUi.upgrade_multiselect(),wpmUi.upgrade_tooltips()))}function _make_modal(){null===_modal_overlay&&(_modal_overlay=jQuery("<div></div>").addClass("wpmui-overlay").appendTo(_body)),_body.addClass("wpmui-has-overlay"),_html.addClass("wpmui-no-scroll")}function _close_modal(){_body.removeClass("wpmui-has-overlay"),_html.removeClass("wpmui-no-scroll")}function _init_boxes(){var toggle_box=function(ev){var box=jQuery(this).closest(".wpmui-box");return ev.preventDefault(),box.hasClass("static")?!1:(box.toggleClass("closed"),!1)};_body.on("click",".wpmui-box > h3",toggle_box),_body.on("click",".wpmui-box > h3 > .toggle",toggle_box)}function _init_tabs(){var activate_tab=function(ev){var tab=jQuery(this),all_tabs=tab.closest(".wpmui-tabs"),content=all_tabs.next(".wpmui-tab-contents"),active=all_tabs.find(".active.tab"),sel_tab=tab.attr("href"),sel_active=active.attr("href"),content_tab=content.find(sel_tab);return content_active=content.find(sel_active),tab.hasClass("active")||(active.removeClass("active"),content_active.removeClass("active")),tab.addClass("active"),content_tab.addClass("active"),ev.preventDefault(),!1};_body.on("click",".wpmui-tabs .tab",activate_tab)}var _doc=null,_html=null,_body=null,_modal_overlay=null;wpmUi.popup=function(){return _init(),new wpmUiWindow},wpmUi.ajax=function(ajaxurl,default_action){return _init(),new wpmUiAjaxData(ajaxurl,default_action)},wpmUi.upgrade_multiselect=function(base){_init(),base=jQuery(base||_body);var items=base.find("select[multiple]"),ajax_items=base.find("input[data-select-ajax]"),clean_ghosts=function(el){var id=el.attr("id"),s2id="#s2id_"+id,ghosts=el.parent().find(s2id);ghosts.remove()},upgrade_item=function(){var el=jQuery(this),options={closeOnSelect:!1,width:"100%"};"1"!=el.data("wpmui-select")&&(el.data("wpmui-select","1"),clean_ghosts(el),window.setTimeout(function(){el.select2(options)},1))},upgrade_ajax=function(){var format_item=function(item){return item.val},get_id=function(item){return item.key},init_selection=function(me,callback){var vals=me.val(),data=[];plain=[],jQuery(vals.split(",")).each(function(){var item=this.split("::");plain.push(item[0]),data.push({key:item[0],val:item[1]})}),me.val(plain.join(",")),callback(data)},el=jQuery(this),options={closeOnSelect:!1,width:"100%",multiple:!0,minimumInputLength:1,ajax:{url:el.attr("data-select-ajax"),dataType:"json",quietMillis:100,cache:!0,data:function(term){return{q:term}},results:function(data){return{results:data.items}}},id:get_id,formatResult:format_item,formatSelection:format_item,initSelection:init_selection};"1"!=el.data("wpmui-select")&&(el.data("wpmui-select","1"),clean_ghosts(el),window.setTimeout(function(){el.select2(options)},1))};"function"==typeof jQuery.fn.each2?(items.each2(upgrade_item),ajax_items.each2(upgrade_ajax)):(items.each(upgrade_item),ajax_items.each(upgrade_ajax))},wpmUi.message=function(args){var parent,msg_box,btn_close,need_insert;_init();var hide_message=function(ev){return ev.preventDefault(),msg_box.remove(),!1},toggle_debug=function(){var me=jQuery(this).closest(".wpmui-msg");me.find(".debug").toggle()};return"undefined"==typeof args?!1:(("string"==typeof args||args instanceof Array)&&(args={message:args}),args.message instanceof Array&&(args.message=args.message.join("<br />")),args.message?(args.type=void 0==args.type?"ok":args.type.toString().toLowerCase(),args.close=void 0==args.close?!0:args.close,args.parent=void 0==args.parent?".wrap":args.parent,args.insert_after=void 0==args.insert_after?"h2":args.insert_after,args.id=void 0==args.id?"":args.id.toString().toLowerCase(),args["class"]=void 0==args["class"]?"":args["class"].toString().toLowerCase(),args.details=void 0==args.details?!1:args.details,("error"==args.type||"red"==args.type)&&(args.type="err"),("success"==args.type||"green"==args.type)&&(args.type="ok"),parent=jQuery(args.parent).first(),parent.length?(args.id&&jQuery('.wpmui-msg[data-id="'+args.id+'"]').length?(msg_box=jQuery('.wpmui-msg[data-id="'+args.id+'"]').first(),need_insert=!1):(msg_box=jQuery("<div><p></p></div>"),args.id&&msg_box.attr("data-id",args.id),need_insert=!0),msg_box.find("p").html(args.message),"err"==args.type&&args.details&&window.JSON&&(jQuery('<div class="debug" style="display:none"></div>').appendTo(msg_box).text(JSON.stringify(args.details)),jQuery('<i class="dashicons dashicons-editor-help light"></i>').prependTo(msg_box.find("p:first")).click(toggle_debug).after(" ")),msg_box.removeClass().addClass("updated wpmui-msg "+args["class"]),"err"==args.type&&msg_box.addClass("error"),need_insert&&(args.close&&(btn_close=jQuery('<a href="#" class="wpmui-close">&times;</a>'),btn_close.prependTo(msg_box),btn_close.click(hide_message)),args.insert_after&&parent.find(args.insert_after).length?(parent=parent.find(args.insert_after).first(),parent.after(msg_box)):parent.prepend(msg_box)),!0):!1):!1)},wpmUi.tooltip=function(el,args){var tip,parent;_init();var position_tip=function(tip){var tip_width=tip.outerWidth(),tip_height=tip.outerHeight(),tip_padding=5,el_width=el.outerWidth(),el_height=el.outerHeight(),pos={};switch(pos.left=(el_width-tip_width)/2,pos.top=(el_height-tip_height)/2,pos[args.pos]="auto",args.pos){case"top":pos.bottom=el_height+tip_padding;break;case"bottom":pos.top=el_height+tip_padding;break;case"left":pos.right=el_width+tip_padding;break;case"right":pos.left=el_width+tip_padding}tip.css(pos)},show_tip=function(){var tip=jQuery(this).closest(".wpmui-tip-box").find(".wpmui-tip");tip.addClass("wpmui-visible"),tip.show(),position_tip(tip),setTimeout(function(){position_tip(tip)},35)},hide_tip=function(){var tip=jQuery(this).closest(".wpmui-tip-box").find(".wpmui-tip");tip.removeClass("wpmui-visible"),tip.hide()},toggle_tip=function(ev){tip.hasClass("wpmui-visible")?hide_tip.call(this,ev):show_tip.call(this,ev)};return"string"==typeof args&&(args={content:args}),void 0===args.content?!1:(el=jQuery(el),el.length?(args.trigger=void 0==args.trigger?"hover":args.trigger.toString().toLowerCase(),args.pos=void 0==args.pos?"top":args.pos.toString().toLowerCase(),args["class"]=void 0==args["class"]?"":args["class"].toString().toLowerCase(),parent=el.parent(),parent.hasClass("wpmui-tip-box")||(parent=el.wrap('<span class="wpmui-tip-box"></span>').parent().addClass(args["class"]+"-box")),tip=parent.find("> .wpmui-tip"),tip.length||(tip=jQuery('<div class="wpmui-tip"></div>'),tip.addClass(args["class"]).addClass(args.pos).appendTo(el.parent()).hide(),isNaN(args.width)||tip.width(args.width),"hover"==args.trigger?el.hover(show_tip,hide_tip):"click"==args.trigger&&el.click(toggle_tip)),tip.html(args.content),!0):!1)},wpmUi.upgrade_tooltips=function(){var el=jQuery("[data-tooltip]");el.each(function(){var me=jQuery(this),args={content:me.attr("data-tooltip"),pos:me.attr("data-pos"),trigger:me.attr("data-trigger"),"class":me.attr("data-class"),width:me.attr("data-width")};wpmUi.tooltip(me,args)})},wpmUi.obj=function(value){var obj={};if(value instanceof Object)obj=value;else if(value instanceof Array)if("function"==typeof value.reduce)obj=value.reduce(function(o,v,i){return o[i]=v,o},{});else for(var i=value.length-1;i>0;i-=1)void 0!==value[i]&&(obj[i]=value[i]);else"string"==typeof value?obj.scalar=value:"number"==typeof value?obj.scalar=value:"boolean"==typeof value&&(obj.scalar=value);return obj},jQuery(function(){_init()});var wpmUiWindow=function(){function _init(){_wnd=jQuery('<div class="wpmui-wnd"></div>'),_el_title=jQuery('<div class="wpmui-wnd-title"><span class="the-title"></span></div>'),_btn_close=jQuery('<a href="#" class="wpmui-wnd-close"><i class="dashicons dashicons-no-alt"></i></a>'),_el_content=jQuery('<div class="wpmui-wnd-content"></div>'),_el_title.appendTo(_wnd),_el_content.appendTo(_wnd),_btn_close.appendTo(_el_title),_wnd.appendTo(_body).hide(),_hook(),_visible=!1,_update_window()}function _hook(){_wnd&&(_wnd.on("click",".wpmui-wnd-close",_me.close),_wnd.on("click","thead .check-column :checkbox",_toggle_checkboxes),_wnd.on("click","tfoot .check-column :checkbox",_toggle_checkboxes),_wnd.on("click","tbody .check-column :checkbox",_check_checkboxes),jQuery(window).on("resize",_check_size))}function _unhook(){_wnd&&(_wnd.off("click",".wpmui-wnd-close",_me.close),_wnd.off("click",".check-column :checkbox",_toggle_checkboxes),jQuery(window).off("resize",_check_size))}function _update_window(width,height){if(!_wnd)return!1;width=width||_width,height=height||_height;var styles={width:width,height:height,"margin-left":-1*(width/2),"margin-top":-1*(height/2)};if(_el_title.find(".the-title").text(_title),_content_changed){_wnd.find(".buttons").remove(),_wnd.addClass("no-buttons"),_content instanceof jQuery?_el_content.html(_content.html()):_el_content.html(jQuery(_content).html());var buttons=_el_content.find(".buttons");buttons.length&&(buttons.appendTo(_wnd),_wnd.removeClass("no-buttons")),_content_changed=!1}_wnd.is(":visible")?_wnd.animate(styles,200):_wnd.css(styles),_modal_overlay instanceof jQuery&&_modal_overlay.off("click",_modal_close),_visible?(_wnd.show(),_modal&&_make_modal(),_modal_overlay.on("click",_modal_close),_need_check_size&&(_need_check_size=!1,_check_size())):(_wnd.hide(),_close_modal())}function _modal_close(){return _wnd?!_modal_overlay instanceof jQuery?!1:(_modal_overlay.off("click",_modal_close),_me.close(),void 0):!1}function _check_size(){if(!_wnd)return!1;var me=jQuery(this),window_width=me.innerWidth(),window_height=me.innerHeight(),real_width=_width,real_height=_height;_width>window_width&&(real_width=window_width),_height>window_height&&(real_height=window_height),_update_window(real_width,real_height)}function _toggle_checkboxes(ev){{var chk=jQuery(this),c=chk.prop("checked");ev.shiftKey}chk.closest("table").children("tbody, thead, tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",c)}function _check_checkboxes(){var chk=jQuery(this),unchecked=chk.closest("tbody").find(":checkbox").filter(":visible").not(":checked");return chk.closest("table").children("thead, tfoot").find(":checkbox").prop("checked",0===unchecked.length),!0}var _me=this,_visible=!1,_modal=!1,_width=740,_height=400,_title="Window",_content="",_content_changed=!1,_need_check_size=!1,_onshow=null,_onhide=null,_onclose=null,_wnd=null,_el_title=null,_btn_close=null,_el_content=null;this.modal=function(state){return _modal=state?!0:!1,_update_window(),_me},this.size=function(width,height){var new_width=Math.abs(parseFloat(width)),new_height=Math.abs(parseFloat(height));return isNaN(new_width)||(_width=new_width),isNaN(new_height)||(_height=new_height),_need_check_size=!0,_update_window(),_me},this.title=function title(title){return _title=title,_update_window(),_me},this.content=function(data){return _content=data,_need_check_size=!0,_content_changed=!0,_update_window(),_me},this.onshow=function(callback){return _onshow=callback,_me},this.onhide=function(callback){return _onhide=callback,_me},this.onclose=function(callback){return _onclose=callback,_me},this.loading=function(state){return state?_wnd.addClass("wpmui-loading"):_wnd.removeClass("wpmui-loading"),_me},this.show=function(){return _visible=!0,_need_check_size=!0,_update_window(),"function"==typeof _onshow&&_onshow.apply(_me,[_me.$()]),_me},this.hide=function(){return _visible=!1,_update_window(),"function"==typeof _onhide&&_onhide.apply(_me,[_me.$()]),_me},this.close=function(){_me.hide(),"function"==typeof _onclose&&_onclose.apply(_me,[_me.$()]),_unhook(),_wnd.remove(),_wnd=null},this.$=function(){return _wnd},_me=this,_init()},wpmUiAjaxData=function(_ajaxurl,_default_action){function _init(){_ajaxurl||"string"!=typeof window.ajaxurl||(_ajaxurl=window.ajaxurl),_void_frame=_body.find("#wpmui_void"),_void_frame.length||(_void_frame=jQuery("<iframe></iframe>").attr("name","wpmui_void").attr("id","wpmui_void").css({width:1,height:1,display:"none",visibility:"hidden",position:"absolute",left:-1e3,top:-1e3}).hide().appendTo(_body)),_what_is_supported(),_me.reset()}function _what_is_supported(){var inp=document.createElement("INPUT"),xhr=new XMLHttpRequest;inp.type="file",_support_file_api="files"in inp,_support_progress=!!(xhr&&"upload"in xhr&&"onprogress"in xhr.upload),_support_form_data=!!window.FormData}function _create_xhr(){var xhr=new window.XMLHttpRequest;return _support_progress&&(xhr.upload.addEventListener("progress",function(evt){if(evt.lengthComputable){var percentComplete=evt.loaded/evt.total;_call_progress(percentComplete)}else _call_progress(-1)},!1),xhr.addEventListener("progress",function(evt){if(evt.lengthComputable){var percentComplete=evt.loaded/evt.total;_call_progress(percentComplete)}else _call_progress(-1)},!1)),xhr}function _call_progress(value){_support_progress&&"function"==typeof _onprogress&&_onprogress(value)}function _call_done(response,okay,xhr){_call_progress(100),"function"==typeof _ondone&&_ondone(response,okay,xhr)}function _get_data(action,use_formdata){var data={};if(use_formdata=use_formdata&&_support_form_data,_data instanceof jQuery)if(_data.find(".wp-editor-area").each(function(){var id=jQuery(this).attr("id"),sel="#wp-"+id+"-wrap",container=jQuery(sel),editor=tinyMCE.get(id);editor&&container.hasClass("tmce-active")&&editor.save()}),use_formdata)data=new FormData(_data[0]);else{data={};var push_counters={},patterns={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/},_build=function(base,key,value){return base[key]=value,base},_push_counter=function(key){return void 0===push_counters[key]&&(push_counters[key]=0),push_counters[key]++};jQuery.each(_data.serializeArray(),function(){if(patterns.validate.test(this.name)){for(var k,keys=this.name.match(patterns.key),merge=this.value,reverse_key=this.name;void 0!==(k=keys.pop());)reverse_key=reverse_key.replace(new RegExp("\\["+k+"\\]$"),""),k.match(patterns.push)?merge=_build([],_push_counter(reverse_key),merge):k.match(patterns.fixed)?merge=_build([],k,merge):k.match(patterns.named)&&(merge=_build({},k,merge));data=jQuery.extend(!0,data,merge)}}),_data.find("input[type=file]").each(function(){var me=jQuery(this),name=me.attr("name"),inp=me.clone(!0)[0];data[":files"]=data[":files"]||{},data[":files"][name]=inp})}else if("string"==typeof _data){temp=_data.split("&").map(function(kv){return kv.split("=",2)}),data=use_formdata?new FormData:{};for(var ind in temp){var name=decodeURI(temp[ind][0]),val=decodeURI(temp[ind][1]);use_formdata?data.append(name,val):void 0!==data[name]?("object"!=typeof data[name]&&(data[name]=[data[name]]),data[name].push(val)):data[name]=val}}else if("object"==typeof _data)if(use_formdata){data=new FormData;for(var name in _data)_data.hasOwnProperty(name)&&data.append(name,_data[name])}else data=jQuery.extend({},_data);return data instanceof FormData?data.append("action",action):data.action=action,data}function _load(action,type){var data=_get_data(action,!0),ajax_args={},response=null,okay=!1;"json"!=type&&(type="text"),_call_progress(-1),ajax_args={url:_ajaxurl,type:"POST",dataType:"html",data:data,xhr:_create_xhr,success:function(resp){if(okay=!0,response=resp,"json"==type)try{response=jQuery.parseJSON(resp)}catch(ignore){response={status:"ERR",data:resp}}},error:function(xhr,status,error){okay=!1,response=error},complete:function(xhr){response instanceof Object&&"ERR"==response.status&&(okay=!1),_call_done(response,okay,xhr)}},data instanceof FormData&&(ajax_args.processData=!1,ajax_args.contentType=!1),jQuery.ajax(ajax_args)}function _form_submit(action,target){var data=_get_data(action,!1),form=jQuery("<form></form>"),ajax_action="";for(var name in data)if(data.hasOwnProperty(name))if(":files"==name)for(var file in data[name]){var inp=data[name][file];form.append(inp)}else"action"==name?ajax_action=name+"="+data[name].toString():jQuery('<input type="hidden" />').attr("name",name).attr("value",data[name]).appendTo(form);ajax_action=-1==_ajaxurl.indexOf("?")?"?"+ajax_action:"&"+ajax_action,form.attr("action",_ajaxurl+ajax_action).attr("method","POST").attr("enctype","multipart/form-data").attr("target",target),form.submit()}var _me=this,_void_frame=null,_data={},_onprogress=null,_ondone=null,_support_progress=!1,_support_file_api=!1,_support_form_data=!1;this.data=function(obj){return _data=obj,_me},this.extract_data=function(obj){return _data=obj,_get_data("",!1)},this.onprogress=function(callback){return _onprogress=callback,_me},this.ondone=function(callback){return _ondone=callback,_me},this.reset=function(){return _data={},_onprogress=null,_ondone=null,_me},this.load_text=function(action){return action=action||_default_action,_load(action,"text"),_me},this.load_json=function(action){return action=action||_default_action,_load(action,"json"),_me},this.load_http=function(target,action){return target=target||"wpmui_void",action=action||_default_action,_form_submit(action,target),_me},_me=this,_init()}}(window.wpmUi=window.wpmUi||{});
//# sourceMappingURL=wpmu-ui.min.js.map